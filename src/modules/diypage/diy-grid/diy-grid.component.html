<div class="diy_grid">
    <ng-container *ngIf="type == 'preview';else editTpl;">
        <div class="icongroup" [ngStyle]="{
        width: block.style.width + '%',
        margin:
          block.style.margin.top +
          'px ' +
          block.style.margin.right +
          'px ' +
          block.style.margin.bottom +
          'px ' +
          block.style.margin.left +
          'px ',
        padding:
          block.style.padding.top +
          'px ' +
          block.style.padding.right +
          'px ' +
          block.style.padding.bottom +
          'px ' +
          block.style.padding.left +
          'px ',
        background: block.style.backgroundColor,
        'border-radius': block.style.borderRadius + 'px'
      }">
            <ng-container *ngFor="let icon of block.data.list">
                <div class="icongroup-item" [ngStyle]="{ width: block.style.iconValue + '%' }">
                    <img [ngStyle]="{
              'border-radius': block.style.borderRadius + '%',
              width: block.style.iconWidth + 'px',
              height: block.style.iconHeight + 'px'
            }" style="height: auto" [src]="icon.icon" />
                    <div [ngStyle]="{
              'font-size': block.style.fontSize + 'px'
            }" class="title">
                        {{ icon.name }}
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-container>
    <ng-template #editTpl>
        <app-diy-toolbar [(editType)]="editType" (onTypeChange)="typeChange($event)" (onDelete)="deleteBlock()">
        </app-diy-toolbar>
        <ng-container *ngIf="editType == 'style'">
            <div class="inner">
                <!-- 展现形式 -->
                <div class="form-group">
                    <nz-form-label class="control-label">展现形式</nz-form-label>
                    <nz-radio-group [(ngModel)]="block.style.iconValue">
                        <label nz-radio nzValue="48">两列</label>
                        <label nz-radio nzValue="32">三列</label>
                        <label nz-radio nzValue="24">四列</label>
                        <label nz-radio nzValue="18">五列</label>
                    </nz-radio-group>
                </div>

                <div class="form-group">
                    <nz-form-label class="control-label">背景颜色</nz-form-label>
                    <div class="input-group input-group-sm">
                        <app-diy-color [(color)]="block.style.backgroundColor" (onColorChange)="block.style.backgroundColor = $event" class="input input_color"></app-diy-color>
                        <button (click)="reset(block,'backgroundColor')" nz-button nzType="primary" nzDanger>
              重置
            </button>
                    </div>
                </div>
                <!-- 宽度 -->
                <div class="form-group">
                    <nz-form-label class="control-label">宽度(%)</nz-form-label>
                    <div class="input-group input-group-sm">
                        <input nz-input class="input input_text" [(ngModel)]="block.style.width" type="number" />
                    </div>
                </div>
                <!-- 标题字体大小 -->
                <div class="form-group">
                    <nz-form-label class="control-label">字体大小(px/rpx)</nz-form-label>
                    <div class="input-group input-group-sm">
                        <input nz-input class="input input_text" [(ngModel)]="block.style.fontSize" type="number" />
                    </div>
                </div>
                <!-- 图标宽度-->
                <div class="form-group">
                    <nz-form-label class="control-label">图标宽度</nz-form-label>
                    <div class="input-group input-group-sm">
                        <input nz-input class="input input_text" [(ngModel)]="block.style.iconWidth" type="number" />
                    </div>
                </div>
                <!-- 图标高度-->
                <div class="form-group">
                    <nz-form-label class="control-label">图标高度</nz-form-label>
                    <div class="input-group input-group-sm">
                        <input nz-input class="input input_text" [(ngModel)]="block.style.iconHeight" type="number" />
                    </div>
                </div>
                <!-- 圆角大小-->
                <div class="form-group">
                    <nz-form-label class="control-label">圆角大小</nz-form-label>
                    <div class="input-group input-group-sm">
                        <input nz-input class="input input_text" [(ngModel)]="block.style.borderRadius" type="number" />
                    </div>
                </div>
                <!-- 外边距 -->
                <div class="form-group">
                    <nz-form-label class="control-label">外边距</nz-form-label>
                    <div class="top">
                        <span class="span_padding">上：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.margin.top" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">右：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.margin.right" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">下：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.margin.bottom" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">左：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.margin.left" maxlength="3" type="number" />
                    </div>
                    <button (click)="reset(block,'margin')" nz-button nzType="primary" nzDanger>
            重置
          </button>
                </div>
                <!-- 内边距 -->
                <div class="form-group">
                    <nz-form-label class="control-label">内边距</nz-form-label>
                    <div class="top">
                        <span class="span_padding">上：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.padding.top" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">右：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.padding.right" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">下：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.padding.bottom" maxlength="3" type="number" />
                    </div>
                    <div class="top">
                        <span class="span_padding">左：</span>
                        <input nz-input class="input_padding" placeholder="请输入数字" [(ngModel)]="block.style.padding.left" maxlength="3" type="number" />
                    </div>
                    <div class=" ">
                        <button (click)="reset(block,'padding')" nz-button nzType="primary" nzDanger>
              重置
            </button>
                    </div>
                </div>
            </div>
        </ng-container>

        <ng-container *ngIf="editType == 'data'">
            <div class="data">
                <div class="form-group">
                    <nz-form-label class="control-label">数据来源</nz-form-label>
                    <div class="input-group">
                        <nz-radio-group [(ngModel)]="block.data.src">
                            <label nz-radio nzValue="list">静态数据</label>
                        </nz-radio-group>
                    </div>
                </div>
                <nz-form-label class="control-label">功能数据</nz-form-label>
                <ng-container *ngFor="let item of block.data.list; let index = index">
                    <nz-card class="list">
                        <button class="delete" (click)="onDelete(index)">删除</button>
                        <div class="li">
                            <nz-form-label class="control-label">功能名称</nz-form-label>
                            <div class="input-group">
                                <input nz-input class="input input_text" [(ngModel)]="item.name" type="text" />
                            </div>
                        </div>
                        <div class="li">
                            <nz-form-label class="control-label">跳转地址</nz-form-label>
                            <div class="input-group">
                                <app-edit-url [(url)]="item.url" (onUrlChange)="urlChange($event, index)">
                                </app-edit-url>
                            </div>
                        </div>
                        <div class="li image">
                            <nz-form-label class="control-label">功能图标</nz-form-label>
                            <div></div>
                            <nova-filemanager [multi]="false" [(url)]="item.icon"></nova-filemanager>
                            <div></div>
                        </div>
                    </nz-card>
                </ng-container>
                <button (click)="addIcon()" nz-button nzType="primary" class="btn">
          添加一个
        </button>
            </div>
        </ng-container>
    </ng-template>
</div>